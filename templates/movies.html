{% extends "base.html" %}
{% block content %}
<div class="movies-header">
    <h2>Movies for {{ user.name }}</h2>
    <a href="{{ url_for('add_movie', user_id=user.id) }}" class="btn">Add Movie</a>
    <a href="{{ url_for('home') }}" class="btn btn-back">Back to Users</a>
</div>

<div class="movie-grid">
    {% for movie in movies %}
    <div class="movie-card">
        {% if movie.poster_url and movie.poster_url != 'N/A' %}
        <img src="{{ movie.poster_url }}" alt="{{ movie.name }}" class="movie-poster">
        {% else %}
        <div class="movie-poster no-poster">No Poster</div>
        {% endif %}
        <div class="movie-info">
            <h3>{{ movie.name }}</h3>
            <p><strong>Director:</strong> {{ movie.director or 'Unknown' }}</p>
            <p><strong>Year:</strong> {{ movie.year or 'N/A' }}</p>
            <p><strong>Rating:</strong> {{ movie.rating or 'N/A' }}</p>
            <div class="movie-actions">
                <a href="{{ url_for('update_movie', user_id=user.id, movie_id=movie.id) }}" class="btn btn-small">Update</a>
                <form action="{{ url_for('delete_movie', user_id=user.id, movie_id=movie.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-small btn-danger">Delete</button>
                </form>
            </div>
        </div>
    </div>
    {% else %}
    <p class="empty">No movies yet. Add some!</p>
    {% endfor %}
</div>
{% endblock %}
